<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>01 passport auth logout  </title>

    <link rel="stylesheet" href="../../css/bootstrap.css">
    <link rel="stylesheet" href="../../css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../../css/template.css">
    <link rel="stylesheet" href="pad.css" />


</head>

<body>

    <div class="container">

        <h1> Logout functionality using passport-js  </h1>

        <a href="http://upliftexp-yogendramiraje.rhcloud.com/#/" target="_blank"> Experiment hosted on openshift </a>

        <hr />
        <h2> About this experiment</h2>

        <p>
            In this experiment, I adding logout functionality using passportjs-auth module.  $http.post('/logout') is used 
            to make request to server. Server executes  req.logOut(); and sends a successful message back to client.
            Client can then make necessary changes in the pages by setting the current user to null. This will make
            sure that content that should not be seen by unauthorized person disppears. 

        </p>


        <hr />

        <h2>Code snippet</h2>


        <h3>server side js </h3>
        <pre>
         app.post('/logout', function(req, res)
        {
            req.logOut();
            res.send(200);
        });
        </pre>

        <hr />

        <h3> client side js </h3>
        <pre>
         $scope.logout = ( function () {
            $http.post('/logout')
            .success(function (response) {
                $scope.user = null;
                $rootScope.currentUser = null;
                $location.path("/");
            });
        });

        </pre>

        <h2>Code source</h2>
        <a href="../../fileview/Default.aspx?~/experiments/week8/src/home/home.html" target="_blank">Home HTML Source</a>
        <br /><br />
        <a href="../../fileview/Default.aspx?~/experiments/week8/src/register/register.html" target="_blank">Register HTML Source</a>
        <br /><br />

        <a href="../../fileview/Default.aspx?~/experiments/week8/src/home/loginController.js" target="_blank">login controller source code </a>
        <br /><br />

        <a href="../../fileview/Default.aspx?~/experiments/week8/src/register/registerController.js" target="_blank">register controller source code </a>
        <br /><br />

        <a href="../../fileview/Default.aspx?~/experiments/week8/src/app.js" target="_blank">client app source code </a>
        <br /><br />

        <a href="../../fileview/Default.aspx?~/experiments/week8/src/server.js" target="_blank">server.js source code</a>
        <hr />

        <h2>Reference</h2>
        <a href="https://www.youtube.com/watch?v=8GL5WpQ0vfo" target="_blank"> Prof. Jose's lecture </a>
    </div>

</body>
</html>
